/*
Fraction.js v3.3.0 09/09/2015
http://www.xarg.org/2014/03/precise-calculations-in-javascript/

Copyright (c) 2015, Robert Eisele (robert@xarg.org)
Dual licensed under the MIT or GPL Version 2 licenses.
*/
(function(w){"use strict";function u(a,c){if(!a)return c;if(!c)return a;for(;;){a%=c;if(!a)return c;c%=a;if(!c)return a}}function x(a){for(;0===a%2;a/=2);for(;0===a%5;a/=5);if(1===a)return 0;for(var c=10%a,b=1;1!==c;b++)if(c=10*c%a,2E3<b)return 0;return b}function k(a,c){var b=0,l=1,e=1,k=0,n=0,m=0,h=1,q=1,f=0,g=1,t=1,r=1;if(void 0!==a&&null!==a)if(void 0!==c)b=a,l=c,e=b*l;else switch(typeof a){case "object":"d"in a&&"n"in a?(b=a.n,l=a.d,"s"in a&&(b*=a.s)):0 in a?(b=a[0],1 in a&&(l=a[1])):v();e=b*l;break;case "number":0>
a&&(e=a,a=-a);if(0===a%1)b=a;else if(0<a){1<=a&&(q=Math.pow(10,Math.floor(1+Math.log(a)/Math.LN10)),a/=q);for(;1E7>=g&&1E7>=r;)if(b=(f+t)/(g+r),a===b){1E7>=g+r?(b=f+t,l=g+r):r>g?(b=t,l=r):(b=f,l=g);break}else a>b?(f+=t,g+=r):(t+=f,r+=g),1E7<g?(b=t,l=r):(b=f,l=g);b*=q}else if(isNaN(a)||isNaN(c))l=b=NaN;break;case "string":g=a.match(/\d+|./g);"-"===g[f]?(e=-1,f++):"+"===g[f]&&f++;if(g.length===f+1)n=p(g[f++],e);else if("."===g[f+1]||"."===g[f]){"."!==g[f]&&(k=p(g[f++],e));f++;if(f+1===g.length||"("===
g[f+1]&&")"===g[f+3]||"'"===g[f+1]&&"'"===g[f+3])n=p(g[f],e),h=Math.pow(10,g[f].length),f++;if("("===g[f]&&")"===g[f+2]||"'"===g[f]&&"'"===g[f+2])m=p(g[f+1],e),q=Math.pow(10,g[f+1].length)-1,f+=3}else"/"===g[f+1]||":"===g[f+1]?(n=p(g[f],e),h=p(g[f+2],1),f+=3):"/"===g[f+3]&&" "===g[f+1]&&(k=p(g[f],e),n=p(g[f+2],e),h=p(g[f+4],1),f+=5);if(g.length<=f){l=h*q;e=b=m+l*k+q*n;break}default:v()}if(0===l)throw"DIV/0";d.s=0>e?-1:1;d.n=Math.abs(b);d.d=Math.abs(l)}function p(a,c){isNaN(a=parseInt(a,10))&&v();
return a*c}function v(){throw"Invalid Param";}function e(a,c){if(!(this instanceof e))return new e(a,c);k(a,c);e.REDUCE?a=u(d.d,d.n):a=1;this.s=d.s;this.n=d.n/a;this.d=d.d/a}var d={s:1,n:0,d:1};e.REDUCE=1;e.prototype={s:1,n:0,d:1,abs:function(){return new e(this.n,this.d)},neg:function(){return new e(-this.s*this.n,this.d)},add:function(a,c){k(a,c);return new e(this.s*this.n*d.d+d.s*this.d*d.n,this.d*d.d)},sub:function(a,c){k(a,c);return new e(this.s*this.n*d.d-d.s*this.d*d.n,this.d*d.d)},mul:function(a,
c){k(a,c);return new e(this.s*d.s*this.n*d.n,this.d*d.d)},div:function(a,c){k(a,c);return new e(this.s*d.s*this.n*d.d,this.d*d.n)},clone:function(){return new e(this)},mod:function(a,c){if(isNaN(this.n)||isNaN(this.d))return new e(NaN);if(void 0===a)return new e(this.s*this.n%this.d,1);k(a,c);0===d.n&&0===this.d&&e(0,0);return new e(this.s*d.d*this.n%(d.n*this.d),d.d*this.d)},gcd:function(a,c){k(a,c);return new e(u(d.n,this.n),d.d*this.d/u(d.d,this.d))},lcm:function(a,c){k(a,c);return 0===d.n&&0===
this.n?new e:new e(d.n*this.n/u(d.n,this.n),u(d.d,this.d))},ceil:function(a){a=Math.pow(10,a||0);return isNaN(this.n)||isNaN(this.d)?new e(NaN):new e(Math.ceil(a*this.s*this.n/this.d),a)},floor:function(a){a=Math.pow(10,a||0);return isNaN(this.n)||isNaN(this.d)?new e(NaN):new e(Math.floor(a*this.s*this.n/this.d),a)},round:function(a){a=Math.pow(10,a||0);return isNaN(this.n)||isNaN(this.d)?new e(NaN):new e(Math.round(a*this.s*this.n/this.d),a)},inverse:function(){return new e(this.s*this.d,this.n)},
pow:function(a){return 0>a?new e(Math.pow(this.s*this.d,-a),Math.pow(this.n,-a)):new e(Math.pow(this.s*this.n,a),Math.pow(this.d,a))},equals:function(a,c){k(a,c);return this.s*this.n*d.d===d.s*d.n*this.d},compare:function(a,c){k(a,c);var b=this.s*this.n*d.d-d.s*d.n*this.d;return(0<b)-(0>b)},divisible:function(a,c){k(a,c);return!(!(d.n*this.d)||this.n*d.d%(d.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(a){var c,b="",l=this.n,e=this.d;0>this.s&&(b+="-");1===e?b+=l:
(a&&0<(c=Math.floor(l/e))&&(b=b+c+" ",l%=e),b+=l,b+="/",b+=e);return b},toLatex:function(a){var c,b="",e=this.n,d=this.d;0>this.s&&(b+="-");1===d?b+=e:(a&&0<(c=Math.floor(e/d))&&(b+=c,e%=d),b=b+"\\frac{"+e,b+="}{",b+=d,b+="}");return b},toContinued:function(){var a,c=this.n,b=this.d,e=[];do e.push(Math.floor(c/b)),a=c%b,c=b,b=a;while(1!==c);return e},toString:function(){var a,c=this.n,b=this.d;if(isNaN(c)||isNaN(b))return"NaN";e.REDUCE||(a=u(c,b),c/=a,b/=a);a=String(c).split("");var c=0,d=[~this.s?
"":"-","",""],k="",p=x(b),n;a:{n=1;var m;m=p;for(var h=10,q=1;0<m;h=h*h%b,m>>=1)m&1&&(q=q*h%b);m=q;for(h=0;300>h;h++){if(n===m){n=h;break a}n=10*n%b;m=10*m%b}n=0}m=-1;for(var h=1,q=10+p+n+a.length,f=0;f<q;f++,c*=10){f<a.length?c+=Number(a[f]):(h=2,m++);if(0<p)if(m===n)d[h]+=k+"(",k="";else if(m===p+n){d[h]+=k+")";break}c>=b?(d[h]+=k+(c/b|0),k="",c%=b):1<h?k+="0":d[h]&&(d[h]+="0")}d[0]+=d[1]||"0";return d[2]?d[0]+"."+d[2]:d[0]}};"function"===typeof define&&define.amd?define([],function(){return e}):
"object"===typeof exports?module.exports=e:w.Fraction=e})(this);
